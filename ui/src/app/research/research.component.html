<mat-card>
    <mat-card-title>Prospectus</mat-card-title>
    <mat-tab-group>        
        <mat-tab label="Upload">
            <div class="upload-container">
                <p>Provide a ticker symbol and select a prospectus to upload.</p>
                @if (uploaded) {
                    <p>Successfully uploaded prospectus for [{{uploadTicker}}].</p>
                    <button mat-raised-button color="primary" (click)="reset()">Upload Another</button>
                } @else {
                    <mat-form-field class="ticker" >
                        <input matInput [(ngModel)]="uploadTicker" placeholder="Ticker">
                    </mat-form-field>
                    <input type="file" class="file-input" (change)="uploadProspectus($event)" #fileUpload>
                    <button mat-mini-fab color="primary" class="upload-button" 
                        [disabled]="!uploadTicker" (click)="fileUpload.click()">
                        <mat-icon>attach_file</mat-icon>
                    </button>
                }
            </div>
        </mat-tab>        
        <mat-tab label="Search">
            <div>
                <!-- Search widget element is not visible by default -->
                <gen-search-widget
                    configId="8cb387aa-cc8b-4c1b-984a-0ea32285eebc"
                    triggerId="searchWidgetTrigger">
                </gen-search-widget>
            </div>            
            <div class="search-container">
                <app-ticker-autocomplete (tickerSelected)="setSearchTicker($event)"></app-ticker-autocomplete>
                <mat-form-field class="search-field">
                    <mat-label>Search Query</mat-label>
                    <textarea cdkTextareaAutosize matInput [(ngModel)]="searchQuery" 
                        (keydown.enter)="search()" 
                        [disabled]="searching"
                        placeholder="Search"></textarea>
                </mat-form-field>
            </div>
            @if (searching) {
                <mat-spinner class="search-spinner"></mat-spinner>
            }
            @else if(summary) {
                <div class="summary-results">
                    {{summary}}
                </div>
            }   
            <button mat-raised-button color="primary" class="search-button"
                 [disabled]="!searchTicker || !searchQuery" 
                (click)="search()">Search</button>
                <!-- Element that opens the widget on click. It does not have to be an input -->
            <button class="mdc-button mat-mdc-raised-button vertex-button" id="searchWidgetTrigger">
                Use Widget
            </button>
        </mat-tab>
    </mat-tab-group>        
</mat-card>
